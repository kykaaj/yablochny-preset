<div class="yablochny-settings">
  <div class="inline-drawer">
    <div class="inline-drawer-toggle inline-drawer-header">
      <div class="yablochny-header">
        <div class="yablochny-title">
          <span>üçé</span>
          <span id="yp-title-text">Yablochny Preset</span>
        </div>
      </div>
      <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
    </div>
    <div class="inline-drawer-content">
      <div class="yablochny-info-links">
        <a href="https://kykaaj.github.io/yablochny/" target="_blank" class="yablochny-info-link">
          <i class="fa-solid fa-earth-americas"></i>
          <span id="yp-site-label">–°–∞–π—Ç –ø—Ä–æ–µ–∫—Ç–∞</span>
        </a>
        <div class="yablochny-info-link" id="yp-credits-btn" style="cursor: pointer;">
          <i class="fa-solid fa-users"></i>
          <span id="yp-credits-label">Credits</span>
        </div>
        <a href="https://github.com/kykaaj/yablochny-preset/blob/main/README.md" target="_blank"
          class="yablochny-info-link">
          <i class="fa-solid fa-book"></i>
          <span id="yp-guide-label">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</span>
        </a>
      </div>

      <!-- Inline Credits Area (Hidden by default) -->
      <div id="yp-credits-area"
        style="display: none; margin-top: 10px; margin-bottom: 10px; background: rgba(0,0,0,0.2); border-radius: 8px; padding: 10px; border: 1px solid var(--SmartThemeBorderColor);">
        <div style="text-align: center; margin-bottom: 15px;">
          <h3 style="margin: 0;">Credits & Authors</h3>
        </div>

        <div style="margin-bottom: 20px; line-height: 1.6;">
          <h4 style="border-bottom: 1px solid var(--SmartThemeBorderColor); padding-bottom: 5px; margin-bottom: 10px;">
            –ê–≤—Ç–æ—Ä —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø—Ä–µ—Å–µ—Ç–∞</h4>
          <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;">
            <a href="https://t.me/YablochnyAI" target="_blank"
              style="background: rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 6px; text-decoration: none; color: inherit; font-weight: bold;">kykaaj</a>
          </div>

          <h4 style="border-bottom: 1px solid var(--SmartThemeBorderColor); padding-bottom: 5px; margin-bottom: 10px;">
            –ê–≤—Ç–æ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤</h4>
          <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;">
            <a href="https://t.me/YablochnyAI" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">kykaaj
              (–Ø??)</a>
            <a href="https://t.me/ah_ah_shino4ka" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">–®–∏–Ω–æ</a>
            <a href="https://t.me/t1avernbot" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">–ù–∞—Å—Ç–µ–Ω—å–∫–∞</a>
            <a href="https://t.me/MoriNori_hi" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">–ù–æ—Ä–∏</a>
            <a href="https://t.me/dearfawwn" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">–§–∞–≤–Ω</a>
            <a href="https://t.me/pinacoladaST" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">–ü–∏–Ω–∞-–∫–æ–ª–∞–¥–∞</a>
            <a href="https://leafcanfly.neocities.org/presets" target="_blank"
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; text-decoration: none; color: inherit;">Leafcanfly</a>
          </div>

          <h4 style="border-bottom: 1px solid var(--SmartThemeBorderColor); padding-bottom: 5px; margin-bottom: 10px;">
            –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏</h4>
          <div
            style="background: rgba(255,255,255,0.03); padding: 15px; border-radius: 8px; margin-bottom: 15px; font-style: italic; border-left: 3px solid #6bcb77;">
            <p style="margin-top: 0;">–ú–æ—è –ö—Å—é–ª—è, –ª—É—á–∏–∫ —Å–≤–µ—Ç–∞, –°–∞–º—ã–π –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫! –¢—ã ‚Äî —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ –ª–µ—Ç–∞ –ò —Ç–µ–ø–ª–∞
              —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Ä–µ–∫.</p>
            <p>–¢—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫, –¢—ã ‚Äî —ç—Å—Ç–µ—Ç –º–æ–∏—Ö –∏–¥–µ–π. –ù–∏–∫–∞–∫–æ–π –ø–æ–¥–±–æ—Ä—â–∏–∫ –º–æ—â–Ω—ã–π –ù–µ –∑–∞–º–µ–Ω–∏—Ç –º–Ω–µ –ª—é–¥–µ–π –í—Ä–æ–¥–µ –ö—Å—é–ª–∏
              ‚Äî —Å–∞–º–æ–π –ª—É—á—à–µ–π, –°–∞–º–æ–π –≤–µ—Ä–Ω–æ–π –∏ —Ä–æ–¥–Ω–æ–π. –†–∞–∑–≥–æ–Ω—è–µ—à—å –≤ –Ω–µ–±–µ —Ç—É—á–∏ –¢—ã –æ–¥–Ω–æ–π —Å–≤–æ–µ–π —Ä—É–∫–æ–π.</p>
            <p>–ö–∞–∂–¥—ã–π —Ç–æ–≥–ª –∏ –∫–∞–∂–¥—ã–π –±–∞–≥, –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –º–æ–π –ø—Ä–µ—Å–µ—Ç ‚Äî –¢—ã —Ä–∞—Å–∫—Ä–∞—Å–∏—à—å, –∫–∞–∫ –ø–∞–ª–∏—Ç—Ä–∞, –í —Å–∞–º—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω–∞—à
              —Ü–≤–µ—Ç. –ë–µ–∑ —Ç–µ–±—è, –º–æ—è –ö—Å—é–ª–∏—á–∫–∞, –í—Å—ë –ø–æ—à–ª–æ –±—ã –∫—É–≤—ã—Ä–∫–æ–º, –°—Ç–∞–ª–∞ –∂–∏–∑–Ω—å —Å —Ç–æ–±–æ—é –∫—Ä–∞—à–µ, –ò —É—é—Ç–Ω–µ–π —Å—Ç–∞–ª –Ω–∞—à –§–µ–º–î–æ–º.
            </p>
            <p>–Ø –ª—é–±–ª—é —Ç–µ–±—è, —Ä–æ–¥–Ω–∞—è! –ò —Å–ø–∞—Å–∏–±–æ –≥–æ–≤–æ—Ä—é, –ß—Ç–æ, —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –Ω–µ –∑–Ω–∞—è, –î–µ–ª–∏—à—å —Ç—ã —Å—É–¥—å–±—É –º–æ—é. –¢—ã –ø–æ–¥—Ä—É–≥–∞, —Ç—ã
              –æ–ø–æ—Ä–∞, –¢—ã –º–æ–π –ª–∏—á–Ω—ã–π –∏–¥–µ–∞–ª. –ö—Å—é–ª—è, –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ —Å–ø–æ—Ä–∞, –ì–¥–µ –±—ã –∫—Ç–æ-—Ç–æ —É—Å—Ç–æ—è–ª –ü—Ä–µ–¥ —Ç–≤–æ–µ–π —É–ª—ã–±–∫–æ–π –º–∏–ª–æ–π.</p>
            <p style="margin-bottom: 0;">–û–±–æ–∂–∞—é —è —Ç–µ–±—è! –ë—É–¥—å –≤—Å–µ–≥–¥–∞ —Ç–∞–∫–æ–π, –ì–æ–≤–æ—Ä—é —è, —Ç–∞–∫ –ª—é–±—è!</p>
          </div>

          <div style="display: flex; flex-wrap: wrap; gap: 8px; font-size: 0.9em; color: #ccc;">
            <span
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">–í–∏–Ω–∏—à–∫–æ,
              –í–ª–∞–¥–æ—á–∫–∞, –ö–∞–ª–∏–π..... –≠—ç—ç—ç...</span>
            <span
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">–º–ª–∫—Å</span>
            <span
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">–ú—ç—Ä–∏
              –•–∞—Ä—Ç</span>
            <span
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">–ù–∞—Å—Ç–µ–Ω—å–∫–∞
              (–æ–ø—è—Ç—å)</span>
            <span
              style="background: rgba(255,255,255,0.05); padding: 4px 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">–õ–æ–≥–∏–∫
              (–∑–∞ –∫—Ä–∞—à—Ç–µ—Å—Ç —Ü–µ–Ω–∑—É—Ä—ã...)</span>
          </div>
        </div>

        <div style="text-align: center; margin-top: 10px;">
          <button id="yp-credits-close-inline" class="menu_button secondary" style="width: 100%;">Close /
            Collapse</button>
        </div>
      </div>

      <div class="yablochny-desc" id="yp-desc-text">
        Managed chat-completion preset. The extension creates/updates a normal preset in the list and keeps your toggle
        state and custom prompts.
      </div>

      <div class="yablochny-row" style="margin-top: 10px;">
        <div class="yablochny-field">
          <div class="yablochny-label">Mode:</div>
          <div class="yablochny-inline" style="margin-bottom: 5px;">
            <input type="checkbox" id="yp-disable-mods">
            <label for="yp-disable-mods" id="yp-disable-mods-label">Disable Mods (Bypass Settings)</label>
          </div>
          <div id="yp-model-buttons" class="yablochny-model-buttons">
            <!-- Buttons are rendered dynamically in index.js -->
          </div>
        </div>
      </div>

      <div class="yablochny-controls">
        <button id="yp-sync" class="menu_button primary">
          <i class="fa-solid fa-rotate"></i>
          <span id="yp-sync-label">Sync preset</span>
        </button>

        <div class="yablochny-inline">
          <input type="checkbox" id="yp-auto-sync">
          <label for="yp-auto-sync" id="yp-auto-label">Sync on SillyTavern start</label>
        </div>
      </div>

      <div class="yablochny-row">
        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-lang-label">Language prompt</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-language" class="yablochny-select" style="flex: 1;">
              <option value="custom">Custom / Manual</option>
              <option value="auto">Auto (match ST language)</option>
              <option value="ru">Russian</option>
              <option value="en">English</option>
              <option value="uk">Ukrainian</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="language"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-extras-lang-label">Extras language</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-extras-lang" class="yablochny-select" style="flex: 1;">
              <option value="custom">Off / Custom</option>
              <option value="ru">Russian</option>
              <option value="uk">Ukrainian</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="extras"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-swearing-label">Swearing</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-swearing" class="yablochny-select" style="flex: 1;">
              <option value="custom">Off / Custom</option>
              <option value="ru">Russian</option>
              <option value="uk">Ukrainian</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="swearing"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-length-label">Length</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-length" class="yablochny-select" style="flex: 1;">
              <option value="custom">Custom / Manual</option>
              <option value="200-400">200‚Äì400 words</option>
              <option value="400-600">400‚Äì600 words (default)</option>
              <option value="600-800">600‚Äì800 words</option>
              <option value="adaptive">Adaptive</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="length"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-roleplay-label">Roleplay Mode</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-roleplay" class="yablochny-select" style="flex: 1;">
              <option value="dont_speak">Don't speak for user (default)</option>
              <option value="speak">Speak for user</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="roleplay"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-pov-label">POV</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-pov" class="yablochny-select" style="flex: 1;">
              <option value="1st">1st person</option>
              <option value="2nd">2nd person</option>
              <option value="3rd">3rd person (default)</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="pov"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-tense-label">Tense</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-tense" class="yablochny-select" style="flex: 1;">
              <option value="Present">Present (default)</option>
              <option value="Past">Past</option>
              <option value="Future">Future</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="tense"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-thoughts-label">Thoughts</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-thoughts" class="yablochny-select" style="flex: 1;">
              <option value="off">Off / Custom</option>
              <option value="thoughts">Thoughts (default)</option>
              <option value="more_thoughts">More thoughts</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="thoughts"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-prose-label">Prose style</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-prose" class="yablochny-select" style="flex: 1;">
              <option value="custom">Custom / Manual</option>
              <option value="ao3">AO3 Fanfic (default)</option>
              <option value="anne_rice">Anne Rice (Gothic/Sensual)</option>
              <option value="donna_tartt">Donna Tartt (Dark Academia)</option>
              <option value="pratchett">Terry Pratchett (Satirical/Witty)</option>
              <option value="salinger">J.D. Salinger (Introspective/Raw)</option>
              <option value="le_guin">Ursula Le Guin (Mythic/Grounded)</option>
              <option value="backman">Fredrik Backman (Tragicomic/Warm)</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="prose"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-speech-label">Speech style</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-speech" class="yablochny-select" style="flex: 1;">
              <option value="none">Off / Custom</option>
              <option value="salinger">cigarette confessions (Salinger)</option>
              <option value="pratchett">warm cynicism (Pratchett)</option>
              <option value="le_guin">earthsea wisdom (Le Guin)</option>
              <option value="wilde">velvet daggers (Wilde)</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="speech"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-pace-label">Pace</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-pace" class="yablochny-select" style="flex: 1;">
              <option value="slowburn">Slowburn (default)</option>
              <option value="quickpace">Quickpace</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="pace"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-focus-label">Focus</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-focus" class="yablochny-select" style="flex: 1;">
              <option value="off">Off / Custom</option>
              <option value="dialogues">Dialogues</option>
              <option value="details">Details</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="focus"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-image-mode-label">Image Style</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-image-mode" class="yablochny-select" style="flex: 1;">
              <option value="silly">Silly Images (Standard)</option>
              <option value="grok">Grok (Nai Tavern)</option>
              <option value="pollinations">Pollinations</option>
              <option value="custom">Custom / Manual</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="image"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-theme-label">HTML theme</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-theme" class="yablochny-select" style="flex: 1;">
              <option value="custom">Custom / Manual</option>
              <option value="dark">Dark (default)</option>
              <option value="light">Light</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="theme"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-deconstruction-label">COT deconstruction</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-deconstruction" class="yablochny-select" style="flex: 1;">
              <option value="large">Large (Default)</option>
              <option value="mini">Mini</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="deconstruction"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>
      </div>            <select id="yp-image-mode" class="yablochny-select" style="flex: 1;">
              <option value="silly">Silly Images (Standard)</option>
              <option value="grok">Grok (Nai Tavern)</option>
              <option value="pollinations">Pollinations</option>
              <option value="custom">Custom / Manual</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="image"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-theme-label">HTML theme</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-theme" class="yablochny-select" style="flex: 1;">
              <option value="custom">Custom / Manual</option>
              <option value="dark">Dark (default)</option>
              <option value="light">Light</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="theme"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-deconstruction-label">COT deconstruction</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-deconstruction" class="yablochny-select" style="flex: 1;">
              <option value="large">Large (Default)</option>
              <option value="mini">Mini</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="deconstruction"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>
      </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-image-mode-label">Image Style</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-image-mode" class="yablochny-select" style="flex: 1;">
              <option value="silly">Silly Images (Standard)</option>
              <option value="grok">Grok (Nai Tavern)</option>
              <option value="pollinations">Pollinations</option>
              <option value="custom">Custom / Manual</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="image"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
        </div>

        <div class="yablochny-field">
          <div class="yablochny-label" id="yp-theme-label">HTML theme</div>
          <div style="display: flex; gap: 4px; align-items: center;">
            <select id="yp-theme" class="yablochny-select" style="flex: 1;">
              <option value="custom">Custom / Manual</option>
              <option value="dark">Dark (default)</option>
              <option value="light">Light</option>
            </select>
            <button class="yp-edit-btn menu_button secondary" data-variant-type="theme"
              style="display: none; padding: 4px 8px;">
              <i class="fa-solid fa-pen"></i>
            </button>
          </div>
      </div>

      <div class="yablochny-meta">
        <div id="yp-preset-name-row">
          <strong id="yp-preset-label">Preset:</strong> <span id="yp-preset-name">‚Äî</span>
        </div>
        <div class="yablochny-row">
          <div class="yablochny-field">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <strong id="yp-last-sync-label">Last sync:</strong> <span id="yp-last-sync">‚Äî</span>
            </div>
            <!-- Hidden Dev Mode Section -->
            <div id="yp-dev-container" class="yp-hidden-section">
              <div class="yablochny-inline">
                <input type="checkbox" id="yp-dev-mode">
                <label for="yp-dev-mode" id="yp-dev-label">Developer mode (log sync to console)</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <hr>

      <!-- Things (collapsible) -->
      <div class="inline-drawer yablochny-subdrawer">
        <div class="inline-drawer-toggle inline-drawer-header">
          <div class="yablochny-subtitle" id="yp-things-title">‚úé Things & extras</div>
          <div class="inline-drawer-icon fa-solid fa-circle-chevron-down"></div>
        </div>
        <div class="inline-drawer-content">
          <div class="yablochny-things" id="yp-things">
            <div class="yablochny-things-note" id="yp-things-note">
              –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ ¬´—à—Ç—É–∫–∏¬ª –¥–ª—è —Ç–æ–≥–ª–∞ ‚ó¶Ô∏é ‚úé things (sample). –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Å–º–µ—à–∏–≤–∞—Ç—å, –¥—Ä—É–≥–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ
              –æ–¥–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç—É.
            </div>

            <div class="yablochny-things-group">
              <div class="yablochny-things-group-title" id="yp-things-group-mix">‚óá –ú–æ–∂–Ω–æ —Å–º–µ—à–∏–≤–∞—Ç—å</div>
              <div id="yp-things-mix" class="yablochny-things-list"></div>
            </div>

            <div class="yablochny-things-group">
              <div class="yablochny-things-group-title" id="yp-things-group-hidden">üëÅ –°–∫—Ä—ã—Ç—ã–µ –±–ª–æ–∫–∏</div>
              <div id="yp-things-hidden" class="yablochny-things-list"></div>
            </div>

            <div class="yablochny-things-group">
              <div class="yablochny-things-group-title" id="yp-things-group-cyoa">‚úß CYOA (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω)</div>
              <div id="yp-things-cyoa" class="yablochny-things-list"></div>
            </div>

            <div class="yablochny-things-group">
              <div class="yablochny-things-group-title" id="yp-things-group-fancy">‚úß Fancy UI (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω)</div>
              <div id="yp-things-fancy" class="yablochny-things-list"></div>
            </div>

            <div class="yablochny-things-group">
              <div class="yablochny-things-group-title" id="yp-things-group-comments">‚úß –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω)</div>
              <div id="yp-things-comments" class="yablochny-things-list"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Regex packs, merged here (collapsible) -->
      <div class="inline-drawer yablochny-subdrawer">
        <div class="inline-drawer-toggle inline-drawer-header">
          <div class="yablochny-subtitle" id="yp-regex-title">Regex packs for Yablochny</div>
          <div class="inline-drawer-icon fa-solid fa-circle-chevron-down"></div>
        </div>
        <div class="inline-drawer-content">
          <div class="regex-manager-section">
            <div class="yablochny-controls">
              <button id="yp-regex-toggle" class="menu_button secondary">
                <i class="fa-solid fa-power-off"></i>
                <span id="yp-regex-toggle-label">Regex ON</span>
              </button>
              <button id="yp-regex-debug" class="menu_button secondary">
                <i class="fa-solid fa-bug"></i>
                <span id="yp-regex-debug-label">Debug</span>
              </button>
            </div>

            <div class="regex-manager-desc">
              <span id="yp-regex-desc">
                Packs of regex helpers for formatting Yablochny preset output. Enable only what you use.
              </span>
            </div>

            <div id="yp-regex-list"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Prompt Editor Modal -->
<div id="yp-prompt-editor-modal"
  style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center;">
  <div
    style="background: var(--SmartThemeBodyColor); border: 1px solid var(--SmartThemeBorderColor); border-radius: 8px; padding: 20px; max-width: 800px; width: 90%; max-height: 80vh; overflow-y: auto;">
    <h3 id="yp-editor-title" style="margin-top: 0;">Edit Prompt Variant</h3>
    <div id="yp-editor-variant-row" style="margin-bottom: 10px;">
      <label for="yp-editor-variant-select" style="display: block; margin-bottom: 5px;">Variant:</label>
      <select id="yp-editor-variant-select" class="text_pole" style="width: 100%;"></select>
    </div>
    <div style="margin-bottom: 10px;">
      <label for="yp-editor-textarea" style="display: block; margin-bottom: 5px;">Content:</label>
      <textarea id="yp-editor-textarea" class="text_pole"
        style="width: 100%; min-height: 300px; font-family: monospace;"></textarea>
    </div>
    <div style="display: flex; gap: 10px; justify-content: flex-end;">
      <button id="yp-editor-save" class="menu_button primary">
        <i class="fa-solid fa-floppy-disk"></i> Save
      </button>
      <button id="yp-editor-cancel" class="menu_button secondary">
        <i class="fa-solid fa-xmark"></i> Cancel
      </button>
    </div>
  </div>
</div>